; TODO - interaction-environment sort of simulates real
; expected runtime environment
; current can't resolve ex:undefined, which is inside expander
; will need to resolve these to expanded code instead of direct emit
; (including register-macro etc)

; libraries are modules with exported identifiers
; instead of compat-eval, call runtime directly
; and get rid of all evals except for repl/loki-eval

; support implicit begin in toplevel programs
; will need to separate "program" normalize stage
; into "import" and "program", so that we can detect
; the start of expressions and insert begin before them 

; reduce to core intrinsics, implement things like map
; in r7rs.scm
